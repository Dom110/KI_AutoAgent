2025-09-25 15:36:07,876 - __main__ - INFO - 🚀 Starting server on port 8000
INFO:     Started server process [46341]
INFO:     Waiting for application startup.
2025-09-25 15:36:07,914 - __main__ - INFO - 🚀 KI AutoAgent Backend starting...
2025-09-25 15:36:07,915 - __main__ - INFO - 🔍 Checking system dependencies...
2025-09-25 15:36:07,927 - core.startup_check - INFO - ✅ Redis server is running and accessible
2025-09-25 15:36:07,935 - core.startup_check - WARNING - ⚠️ Optional package semgrep (Security analysis) not installed. Install with: pip install semgrep
2025-09-25 15:36:07,935 - core.startup_check - WARNING - ⚠️ Optional package radon (Code metrics) not installed. Install with: pip install radon
2025-09-25 15:36:07,935 - core.startup_check - WARNING - ⚠️ Optional package vulture (Dead code detection) not installed. Install with: pip install vulture
2025-09-25 15:36:07,936 - core.startup_check - INFO - ✅ Cache directory /Users/dominikfoert/.ki_autoagent is writable
2025-09-25 15:36:07,938 - core.startup_check - WARNING - ⚠️ ANTHROPIC_API_KEY not set. Claude API access will not work.
2025-09-25 15:36:07,938 - core.startup_check - WARNING -    Set with: export ANTHROPIC_API_KEY='your-api-key'
2025-09-25 15:36:07,938 - core.startup_check - INFO - ✅ All system dependencies verified successfully
2025-09-25 15:36:07,938 - core.memory_manager - INFO - MemoryManager initialized with capacity: 10000
2025-09-25 15:36:07,938 - core.shared_context_manager - INFO - SharedContextManager initialized
2025-09-25 15:36:07,938 - core.conversation_context_manager - INFO - ConversationContextManager initialized with max history: 50
2025-09-25 15:36:07,938 - core.workflow_engine - INFO - WorkflowEngine initialized
2025-09-25 15:36:07,938 - core.agent_communication_bus - INFO - AgentCommunicationBus initialized
2025-09-25 15:36:07,938 - core.validation_workflow - INFO - ValidationWorkflow initialized (auto_fix=True)
2025-09-25 15:36:07,938 - core.agent_communication_bus - INFO - Communication bus started
2025-09-25 15:36:07,938 - __main__ - INFO - 🧠 Core systems initialized: Memory, SharedContext, ConversationContext, Workflow, CommunicationBus, Validation
2025-09-25 15:36:07,939 - services.conversation_persistence - INFO - ✅ Conversation database initialized at /Users/dominikfoert/.ki_autoagent/conversations.db
2025-09-25 15:36:07,939 - __main__ - INFO - ✅ Conversation persistence initialized
2025-09-25 15:36:07,939 - agents.agent_registry - INFO - 🎯 Agent Registry initialized
2025-09-25 15:36:07,939 - __main__ - INFO - 📦 Registering agents...
2025-09-25 15:36:07,939 - agents.base.base_agent - INFO - 🤖 🎯 OrchestratorAgent initialized (Model: gpt-4o-2024-11-20)
2025-09-25 15:36:07,957 - utils.openai_service - INFO - ✅ OpenAI Service initialized with model: gpt-4o-2024-11-20
2025-09-25 15:36:07,958 - agents.agent_registry - INFO - ✅ Registered agent: orchestrator (Advanced KI AutoAgent Orchestrator) with model gpt-4o-2024-11-20
2025-09-25 15:36:07,958 - agents.base.base_agent - INFO - 🤖 🏗️ ArchitectAgent initialized (Model: gpt-5-2025-09-12)
2025-09-25 15:36:07,963 - utils.openai_service - INFO - ✅ OpenAI Service initialized with model: gpt-5-2025-09-12
2025-09-25 15:36:07,965 - services.project_cache - INFO - ✅ Redis cache connected
2025-09-25 15:36:07,966 - services.code_search - INFO - ✅ Code search database initialized at /Users/dominikfoert/git/KI_AutoAgent/backend/.ki_autoagent/search.db
2025-09-25 15:36:07,967 - services.smart_file_watcher - INFO - 👁️ Smart file watcher started for /Users/dominikfoert/git/KI_AutoAgent/backend
2025-09-25 15:36:07,967 - services.smart_file_watcher - INFO - ⏱️ Debounce period: 30 seconds
2025-09-25 15:36:07,967 - services.smart_file_watcher - INFO - 🤖 Bot change detection: ENABLED
2025-09-25 15:36:07,967 - agents.specialized.architect_agent - INFO - ✅ Cache services initialized: Redis cache, SQLite search, Smart File watcher with 30s debounce
2025-09-25 15:36:07,967 - agents.specialized.architect_agent - INFO - ✅ Code indexing tools initialized
2025-09-25 15:36:07,967 - agents.agent_registry - INFO - ✅ Registered agent: architect (System Architecture Specialist) with model gpt-5-2025-09-12
2025-09-25 15:36:07,967 - agents.base.base_agent - INFO - 🤖 💻 CodeSmithAgent initialized (Model: claude-4.1-sonnet-20250920)
2025-09-25 15:36:08,514 - utils.claude_code_service - INFO - ✅ Claude Code CLI found: 1.0.115 (Claude Code)
2025-09-25 15:36:08,515 - agents.agent_registry - INFO - ✅ Registered agent: codesmith (Code Implementation Specialist) with model claude-4.1-sonnet-20250920
2025-09-25 15:36:08,515 - agents.base.base_agent - INFO - 🤖 📝 DocuBot initialized (Model: gpt-4o-2024-11-20)
2025-09-25 15:36:08,521 - utils.openai_service - INFO - ✅ OpenAI Service initialized with model: gpt-4o-2024-11-20
2025-09-25 15:36:08,521 - agents.agent_registry - INFO - ✅ Registered agent: docubot (Technical Documentation Expert) with model gpt-4o-2024-11-20
2025-09-25 15:36:08,521 - agents.base.base_agent - INFO - 🤖 🔍 ReviewerGPT initialized (Model: gpt-5-mini-2025-09-20)
2025-09-25 15:36:08,525 - utils.openai_service - INFO - ✅ OpenAI Service initialized with model: gpt-5-mini-2025-09-20
2025-09-25 15:36:08,525 - agents.agent_registry - INFO - ✅ Registered agent: reviewer (Code Review & Security Expert) with model gpt-5-mini-2025-09-20
2025-09-25 15:36:08,525 - agents.base.base_agent - INFO - 🤖 🔧 FixerBot initialized (Model: claude-4.1-sonnet-20250920)
2025-09-25 15:36:09,068 - utils.claude_code_service - INFO - ✅ Claude Code CLI found: 1.0.115 (Claude Code)
2025-09-25 15:36:09,069 - agents.agent_registry - INFO - ✅ Registered agent: fixer (Bug Fixing & Optimization Expert) with model claude-4.1-sonnet-20250920
2025-09-25 15:36:09,069 - agents.base.base_agent - INFO - 🤖 🔍 ResearchBot initialized (Model: perplexity-llama-3.1-sonar-huge-128k)
2025-09-25 15:36:09,069 - agents.agent_registry - INFO - ✅ Registered agent: research (Web Research Specialist) with model perplexity-llama-3.1-sonar-huge-128k
2025-09-25 15:36:09,069 - agents.base.base_agent - INFO - 🤖 📈 TradeStrat initialized (Model: claude-4.1-sonnet-20250920)
2025-09-25 15:36:09,616 - utils.claude_code_service - INFO - ✅ Claude Code CLI found: 1.0.115 (Claude Code)
2025-09-25 15:36:09,616 - agents.agent_registry - INFO - ✅ Registered agent: tradestrat (Trading Strategy Expert) with model claude-4.1-sonnet-20250920
2025-09-25 15:36:09,617 - agents.base.base_agent - INFO - 🤖 ⚖️ OpusArbitrator initialized (Model: claude-opus-4-1-20250805)
2025-09-25 15:36:10,168 - utils.claude_code_service - INFO - ✅ Claude Code CLI found: 1.0.115 (Claude Code)
2025-09-25 15:36:10,168 - agents.agent_registry - INFO - ✅ Registered agent: opus-arbitrator (Supreme Agent Arbitrator) with model claude-opus-4-1-20250805
2025-09-25 15:36:10,168 - agents.base.base_agent - INFO - 🤖 ⚡ PerformanceBot initialized (Model: gpt-4o-2024-11-20)
2025-09-25 15:36:10,173 - utils.openai_service - INFO - ✅ OpenAI Service initialized with model: gpt-4o-2024-11-20
2025-09-25 15:36:10,173 - agents.agent_registry - INFO - ✅ Registered agent: performance_bot (Performance Analysis Specialist) with model gpt-4o-2024-11-20
2025-09-25 15:36:10,173 - __main__ - INFO - ✅ Registered 10 agents
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     127.0.0.1:50090 - "WebSocket /ws/chat" [accepted]
2025-09-25 15:36:13,398 - __main__ - INFO - ✅ Client client_0 connected. Total: 1
INFO:     connection open
INFO:     127.0.0.1:50236 - "WebSocket /ws/chat" [accepted]
2025-09-25 15:40:17,389 - __main__ - INFO - ✅ Client client_1 connected. Total: 2
INFO:     connection open
2025-09-25 15:40:17,390 - __main__ - INFO - 📨 Received from client_1: chat
2025-09-25 15:40:17,391 - __main__ - INFO - 📨 Processing request from client_1 for agent architect
2025-09-25 15:40:17,393 - agents.specialized.architect_agent - INFO - 🔄 Updating file watcher from /Users/dominikfoert/git/KI_AutoAgent/backend to /Users/dominikfoert/git/KI_AutoAgent/backend
2025-09-25 15:40:17,393 - services.smart_file_watcher - INFO - 👁️ Smart file watcher stopped
2025-09-25 15:40:17,394 - services.smart_file_watcher - INFO - 👁️ Smart file watcher started for /Users/dominikfoert/git/KI_AutoAgent/backend
2025-09-25 15:40:17,394 - services.smart_file_watcher - INFO - ⏱️ Debounce period: 30 seconds
2025-09-25 15:40:17,394 - services.smart_file_watcher - INFO - 🤖 Bot change detection: ENABLED
2025-09-25 15:40:17,394 - agents.specialized.architect_agent - INFO - 📡 Architect about to send progress via manager.send_json to client_1
2025-09-25 15:40:17,394 - agents.specialized.architect_agent - INFO - 📤 Architect successfully sent progress to client client_1: 🏗️ Architect starting system analysis...
2025-09-25 15:40:17,854 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 404 Not Found"
2025-09-25 15:40:17,859 - utils.openai_service - ERROR - OpenAI API error: Error code: 404 - {'error': {'message': 'The model `gpt-5-2025-09-12` does not exist or you do not have access to it.', 'type': 'invalid_request_error', 'param': None, 'code': 'model_not_found'}}
2025-09-25 15:40:17,859 - agents.specialized.architect_agent - ERROR - Architecture design failed: 
================================================================================
🚨 SYSTEM NOT READY
================================================================================

❌ Component:  ArchitectAgent
📁 Location:   /Users/dominikfoert/git/KI_AutoAgent/backend/agents/specialized/architect_agent.py:368
❗ Reason:     Failed to parse OpenAI response as JSON: Expecting value: line 1 column 1 (char 0)
💡 Solution:   Check OpenAI API response format or retry the request

================================================================================

2025-09-25 15:40:17,864 - agents.specialized.architect_agent - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/dominikfoert/git/KI_AutoAgent/backend/agents/specialized/architect_agent.py", line 397, in analyze_requirements
    return json.loads(response)
           ~~~~~~~~~~^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/json/decoder.py", line 363, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/dominikfoert/git/KI_AutoAgent/backend/agents/specialized/architect_agent.py", line 325, in execute
    requirements = await self.analyze_requirements(request.prompt)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dominikfoert/git/KI_AutoAgent/backend/agents/specialized/architect_agent.py", line 401, in analyze_requirements
    raise SystemNotReadyError(
    ...<5 lines>...
    )
core.exceptions.SystemNotReadyError: 
================================================================================
🚨 SYSTEM NOT READY
================================================================================

❌ Component:  ArchitectAgent
📁 Location:   /Users/dominikfoert/git/KI_AutoAgent/backend/agents/specialized/architect_agent.py:368
❗ Reason:     Failed to parse OpenAI response as JSON: Expecting value: line 1 column 1 (char 0)
💡 Solution:   Check OpenAI API response format or retry the request

================================================================================


2025-09-25 15:40:17,865 - __main__ - INFO - 📊 Agent result - Status: error, Content length: 1122
2025-09-25 15:40:17,865 - __main__ - ERROR - ❌ Agent error: Failed to design architecture: 
================================================================================
🚨 SYSTEM NOT READY
================================================================================

❌ Component:  ArchitectAgent
📁 Location:   /Users/dominikfoert/git/KI_AutoAgent/backend/agents/specialized/architect_agent.py:368
❗ Reason:     Failed to parse OpenAI response as JSON: Expecting value: line 1 column 1 (char 0)
💡 Solution:   Check OpenAI API response format or retry the
2025-09-25 15:41:17,350 - __main__ - INFO - ❌ Client client_1 disconnected. Total: 1
INFO:     connection closed
INFO:     Shutting down
2025-09-25 15:42:20,060 - __main__ - INFO - ❌ Client client_0 disconnected. Total: 0
INFO:     connection closed
INFO:     Waiting for application shutdown.
2025-09-25 15:42:20,161 - __main__ - INFO - 👋 KI AutoAgent Backend shutting down...
2025-09-25 15:42:20,161 - core.agent_communication_bus - INFO - Communication bus stopped
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - 🛑 Shutting down all agents...
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent orchestrator shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent architect shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent codesmith shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent docubot shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent reviewer shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent fixer shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent research shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent tradestrat shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent opus-arbitrator shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ Agent performance_bot shutdown complete
2025-09-25 15:42:20,161 - agents.agent_registry - INFO - ✅ All agents shutdown complete
INFO:     Application shutdown complete.
INFO:     Finished server process [46341]
