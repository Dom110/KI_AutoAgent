

---

## ğŸ—ï¸ SYSTEM-ARCHITEKTUR (v5.7.0+)

### **WICHTIG: Backend ist GLOBAL installiert!**

```
~/.ki-autoagent/                    # Globale Installation
â”œâ”€â”€ backend/                        # Python Backend (Agents, LangGraph)
â”‚   â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ langgraph_system/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ venv/                           # Python Virtual Environment
â”œâ”€â”€ config/                         # Globale Konfiguration
â”‚   â”œâ”€â”€ .env                        # API Keys
â”‚   â””â”€â”€ .kiautoagent/               # Agent Instructions
â””â”€â”€ logs/                           # Globale Logs

/Users/.../KI_AutoAgent/            # Development Repo
â”œâ”€â”€ backend/                        # Backend Source (fÃ¼r Development)
â”œâ”€â”€ vscode-extension/               # Extension Source
â””â”€â”€ ...

/Users/.../MyApp/                   # USER WORKSPACE
â”œâ”€â”€ src/                            # User Code
â””â”€â”€ .kiautoagent/                   # Workspace-spezifische Daten
```

### **Wie es funktioniert:**
1. **VS Code Extension** startet Backend aus `~/.ki-autoagent/backend/`
2. **Backend** lÃ¤uft global, analysiert aber NUR den User-Workspace
3. **Environment Variable** `KI_WORKSPACE_PATH` teilt dem Backend mit, welcher Workspace analysiert werden soll
4. **Agents** arbeiten auf `$KI_WORKSPACE_PATH`, NICHT auf dem Backend-Code

### **Migration checklist:**
- [x] Backend nach `~/.ki-autoagent/backend/` kopiert
- [x] venv nach `~/.ki-autoagent/venv/` kopiert
- [x] .env nach `~/.ki-autoagent/config/.env` kopiert
- [x] BackendManager.ts updated (nutzt globales Backend, setzt KI_WORKSPACE_PATH)
- [x] server_langgraph.py updated (liest KI_WORKSPACE_PATH)
- [x] architect_agent.py updated (nutzt KI_WORKSPACE_PATH statt PROJECT_PATH)
- [x] **VERIFIZIERT**: ArchitectAgent analysiert TestApp (/Users/dominikfoert/TestApp), NICHT Backend!

---

## ğŸš¨ REMINDER: ARCHITEKTUR-REGELN BEACHTEN!

**Bei JEDER Ã„nderung am System:**
1. Agents â†’ Python Backend (~/.ki-autoagent/backend/)
2. UI â†’ TypeScript (vscode-extension/)
3. AI Calls â†’ NUR Python Backend
4. Frontend â†’ NUR WebSocket zu Backend
5. **Workspace Analyse â†’ NUR $KI_WORKSPACE_PATH, NICHT Backend-Code!**

**VerstÃ¶ÃŸe gegen diese Regeln fÃ¼hren zu Duplikation und Chaos!**

---
